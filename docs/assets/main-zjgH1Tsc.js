(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var f={},s={};Object.defineProperty(s,"__esModule",{value:!0});s.permutations=s.polarToRectangular=b=s.makeBoundedLinear=$=s.makeLinear=s.sum=s.countMap=S=s.initializedArray=s.count=s.zip=s.FIGURE_SPACE=s.NON_BREAKING_SPACE=s.dateIsValid=s.MIN_DATE=s.MAX_DATE=s.makePromise=s.filterMap=s.pick=s.pickAny=s.csvStringToArray=s.parseTimeT=s.parseIntX=s.parseFloatX=s.getAttribute=s.followPath=s.parseXml=s.testXml=N=s.sleep=s.assertClass=void 0;function j(t,e,n="Assertion Failed."){const r=o=>{throw new Error(`${n}  Expected type:  ${e.name}.  Found type:  ${o}.`)};if(t===null)r("null");else if(typeof t!="object")r(typeof t);else if(!(t instanceof e))r(t.constructor.name);else return t;throw new Error("wtf")}s.assertClass=j;function U(t){return new Promise(e=>setTimeout(e,t))}var N=s.sleep=U;function P(t){const n=new DOMParser().parseFromString(t,"application/xml");for(const r of Array.from(n.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:n}}s.testXml=P;function W(t){if(t!==void 0)return P(t)?.parsed?.documentElement}s.parseXml=W;function _(t,...e){for(const n of e){if(t===void 0)return;if(typeof n=="number")t=t.children[n];else{const r=t.getElementsByTagName(n);if(r.length!=1)return;t=r[0]}}return t}s.followPath=_;function Y(t,e,...n){if(e=_(e,...n),e!==void 0&&e.hasAttribute(t))return e.getAttribute(t)??void 0}s.getAttribute=Y;function B(t){if(t==null)return;const e=parseFloat(t);if(isFinite(e))return e}s.parseFloatX=B;function R(t){const e=B(t);if(e!==void 0)return e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||e!=Math.floor(e)?void 0:e}s.parseIntX=R;function Z(t){if(typeof t=="string"&&(t=R(t)),t!=null&&!(t<=0))return new Date(t*1e3)}s.parseTimeT=Z;const K=t=>{const e=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let r;for(;r=e.exec(t);)r[1].length&&r[1]!==","&&n.push([]),n[n.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return n};s.csvStringToArray=K;function Q(t){const e=t.values().next();if(!e.done)return e.value}s.pickAny=Q;function J(t){return t[Math.random()*t.length|0]}s.pick=J;function ee(t,e){const n=[];return t.forEach((r,o)=>{const i=e(r,o);i!==void 0&&n.push(i)}),n}s.filterMap=ee;function te(){let t,e;return{promise:new Promise((r,o)=>{t=r,e=o}),resolve:t,reject:e}}s.makePromise=te;s.MAX_DATE=new Date(864e13);s.MIN_DATE=new Date(-864e13);function ne(t){return isFinite(t.getTime())}s.dateIsValid=ne;s.NON_BREAKING_SPACE=" ";s.FIGURE_SPACE=" ";function*re(...t){const e=t.map(n=>n[Symbol.iterator]());for(;;){const n=e.map(r=>r.next());if(n.some(({done:r})=>r))break;yield n.map(({value:r})=>r)}}s.zip=re;function*oe(t=0,e=1/0,n=1){for(let r=t;r<e;r+=n)yield r}s.count=oe;function X(t,e){const n=[];for(let r=0;r<t;r++)n.push(e(r));return n}var S=s.initializedArray=X;s.countMap=X;function se(t){return t.reduce((e,n)=>e+n,0)}s.sum=se;function ie(t,e,n,r){const o=(r-e)/(n-t);return function(i){return(i-t)*o+e}}var $=s.makeLinear=ie;function le(t,e,n,r){n<t&&([t,e,n,r]=[n,r,t,e]);const o=(r-e)/(n-t);return function(i){return i<=t?e:i>=n?r:(i-t)*o+e}}var b=s.makeBoundedLinear=le;function ae(t,e){return{x:Math.sin(e)*t,y:Math.cos(e)*t}}s.polarToRectangular=ae;function*D(t,e=[]){if(t.length==0)yield e;else for(let n=0;n<t.length;n++){const r=t[n],o=[...e,r],i=[...t.slice(0,n),...t.slice(n+1)];yield*D(i,o)}}s.permutations=D;Object.defineProperty(f,"__esModule",{value:!0});f.download=f.createElementFromHTML=f.getHashInfo=f.getAudioBalanceControl=f.getBlobFromCanvas=f.loadDateTimeLocal=I=f.getById=void 0;const H=s;function ce(t,e){const n=document.getElementById(t);if(!n)throw new Error("Could not find element with id "+t+".  Expected type:  "+e.name);if(n instanceof e)return n;throw new Error("Element with id "+t+" has type "+n.constructor.name+".  Expected type:  "+e.name)}var I=f.getById=ce;function ue(t,e,n="milliseconds"){let r;switch(n){case"minutes":{r=e.getSeconds()*1e3+e.getMilliseconds();break}case"seconds":{r=e.getMilliseconds();break}case"milliseconds":{r=0;break}default:throw new Error("wtf")}t.valueAsNumber=+e-e.getTimezoneOffset()*6e4-r}f.loadDateTimeLocal=ue;function de(t){const{reject:e,resolve:n,promise:r}=(0,H.makePromise)();return t.toBlob(o=>{o?n(o):e(new Error("blob is null!"))}),r}f.getBlobFromCanvas=de;function fe(t){const e=new AudioContext,n=e.createMediaElementSource(t),r=new StereoPannerNode(e,{pan:0});return n.connect(r).connect(e.destination),o=>{r.pan.value=o}}f.getAudioBalanceControl=fe;function pe(){const t=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(r=>{const o=r.split("=",2);if(o.length==2){const i=decodeURIComponent(o[0]),l=decodeURIComponent(o[1]);t.set(i,l)}}),t}f.getHashInfo=pe;function he(t,e){var n=document.createElement("div");return n.innerHTML=t.trim(),(0,H.assertClass)(n.firstChild,e,"createElementFromHTML:")}f.createElementFromHTML=he;function ge(t,e){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}f.download=ge;function O(t,e){const n=t%e;return n<0?n+Math.abs(e):n}class G{constructor(e){this.onWake=e,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#e=!1;cancel(){this.#e=!0}callback(e){this.#e||(requestAnimationFrame(this.callback),this.onWake(e))}}function me(t,e){if(isNaN(t.slope)||isNaN(e.slope)||t.slope==e.slope)return;const n=t.slope==1/0||t.slope==-1/0,r=e.slope==1/0||e.slope==-1/0;if(n&&r)return;const o=n?t.x0:r?e.x0:(e.y0-e.slope*e.x0-t.y0+t.slope*t.x0)/(t.slope-e.slope),i=n?e.slope*(o-e.x0)+e.y0:t.slope*(o-t.x0)+t.y0;return{x:o,y:i}}function q(t,e){return{x:Math.cos(e)*t,y:Math.sin(e)*t}}function ye(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}const v=Math.PI,C=2*v,p=v/2,we=p/2;function Ae(t){if(t%4==0)throw new Error("TODO");const e=S(t+1,o=>{const i=o/t,l=3*p-i*C,c=q(.5,l),a=l-p;return{t:i,point:c,direction:a}});return S(t,o=>({from:e[o],to:e[o+1]})).map(o=>{const i=me({x0:o.from.point.x,y0:o.from.point.y,slope:Math.tan(o.from.direction)},{x0:o.to.point.x,y0:o.to.point.y,slope:Math.tan(o.to.direction)});if(!i)throw new Error("wtf");return{controlPoint:i,segment:o}})}const L=Ae(10);window.CIRCLE=L;class M{static FORMAT=Intl.NumberFormat("en-US",{notation:"standard"}).format;static createHighlight(e,n){if(e<0||e>1||!isFinite(e))throw new Error("wtf");if(n<0||n>1||!isFinite(n))throw new Error("wtf");const r=$(0,1,1,-1),o=$(1,1,0,-1);return this.squashedCircle(r(e),o(n),"real")}static squashedCircle(e,n,r){const o=L.length/2,i=L.map(({controlPoint:c,segment:a},u)=>{const w=u<o?e:n,y={x:c.x*w,y:c.y},h=a.to.point,g={x:h.x*w,y:h.y};return{control:y,final:g}}),l=this.FORMAT;switch(r){case"real":{const c=i.at(-1).final;let a=`M ${l(c.x)}, ${l(c.y)} `;return i.forEach(u=>{a+=`Q ${l(u.control.x)},${l(u.control.y)} ${l(u.final.x)},${l(u.final.y)} `}),a}case"vertices":{let c="";return i.forEach(a=>{c+=`M ${l(a.final.x)},${l(a.final.y)} L ${l(a.final.x)},${l(a.final.y)} `}),c}case"control points":{let c="";return i.forEach(a=>{c+=`M ${l(a.control.x)},${l(a.control.y)} L ${l(a.control.x)},${l(a.control.y)} `}),c}case"control poly":{const c=i.at(-1).control;let a=`M ${l(c.x)}, ${l(c.y)} `;return i.forEach(u=>{a+=`L ${l(u.control.x)},${l(u.control.y)} `}),a}case"vectors":{let a="";return L.forEach((u,w)=>{const{point:y,direction:h}=u.segment.to,g=q(.2,h);a+=`M ${l(y.x)},${l(y.y)} L ${l(y.x+g.x)},${l(y.y+g.y)} `}),a+this.squashedCircle(1,1,"control points")}default:throw new Error("wtf")}}#e=document.createElementNS("http://www.w3.org/2000/svg","g");get top(){return this.#e}#s=document.createElementNS("http://www.w3.org/2000/svg","circle");#t=document.createElementNS("http://www.w3.org/2000/svg","path");#i=document.createElementNS("http://www.w3.org/2000/svg","circle");constructor(){this.#e.append(this.#s,this.#t,this.#i),this.#e.classList.add("sphere")}#l=0;get yAngle(){return this.#l}set yAngle(e){const n=O(e,C);if(n<v){const r=(1-Math.cos(n))/2;this.updateWhite(0,r)}else{const r=(1+Math.cos(n))/2;this.updateWhite(r,1)}}#a=0;get zAngle(){return this.#a}set zAngle(e){this.#t.style.transform=`rotate(${e}rad)`}#n=0;get x(){return this.#n}set x(e){this.#n=e,this.#e.style.setProperty("--x",e+"px")}#r=0;get y(){return this.#r}set y(e){this.#r=e,this.#e.style.setProperty("--y",e+"px")}#o=1;get diameter(){return this.#o}set diameter(e){this.#o=e,this.#e.style.setProperty("--diameter",e.toString())}updateWhite(e,n){const r=M.createHighlight(e,n);return this.#t.setAttribute("d",r),r}}{const t=I("overview1",SVGSVGElement),e=new M;e.x=.5,e.y=.5,t.appendChild(e.top)}async function Ee(){const t=[[{description:"<u>toward you</u>",yAngle:0},{description:"<u>away</u> from you",yAngle:v}],[{description:"<u>up</u>",yAngle:p,zAngle:-p},{description:"<u>down</u>",yAngle:p,zAngle:p}],[{description:"to your <u>left</u>",yAngle:p,zAngle:v},{description:"to your <u>right</u>",yAngle:p,zAngle:0}]],e=I("overview2svg",SVGSVGElement),n=new M;n.x=.5,n.y=.5,e.appendChild(n.top);const r=I("overview2text",HTMLDivElement);async function o(l,c){r.innerHTML=`The <span class="orange">orange</span> side is pointing <span class="fade-in">${c.description}</span>.`;const u=performance.now(),w=u+2e3,y=b(u,l.yAngle,w,c.yAngle);let h;l.zAngle===void 0?c.zAngle===void 0?n.zAngle=Math.random()*C:n.zAngle=c.zAngle:c.zAngle===void 0||(h=b(u,l.zAngle,w,c.zAngle));const g=new G(A=>{n.yAngle=y(A),h&&(n.zAngle=h(A))});await N(2e3),g.cancel(),n.yAngle=c.yAngle,typeof c.zAngle=="number"&&(n.zAngle=c.zAngle),await N(1e3)}let i={description:"",yAngle:0};for(;;){let l=function(d,m){let x=m-d;const E=x*.2;return d+=E,m-=E,x=m-d,Math.random()*x+d},c=function(d,m){function x(V){return b(0,.2,p,.4)(Math.abs(V-p))}let E=m-d;return d+=x(d)*E,m-=x(m)*E,E=m-d,Math.random()*E+d};const a=new Array;for(const d of ye([...t])){const m=d[Math.random()*2|0];await o(i,m),a.push(m),i=m}const u=a.map(d=>d.yAngle),w=Math.min(...u),y=Math.max(...u);if(w==y)throw new Error("wtf");const h=a.flatMap(({zAngle:d})=>typeof d=="number"?O(d,C):[]);if(h.length!=2)throw new Error("wtf");let g=Math.min(...h),A=Math.max(...h),T=A-g;if(T>v&&([g,A]=[A,g+C],T=A-g,T>v))throw new Error("");const F={description:`<i>kinda</i> ${a[0].description}, ${a[1].description} and ${a[2].description}`,yAngle:c(w,y),zAngle:l(g,A)};await o(i,F),i=F}}Ee();const z=I("test",SVGSVGElement),k=S(5,t=>{const e=new M;switch(z.appendChild(e.top),t){case 0:{e.diameter=2,e.y=2,e.x=1,e.yAngle=we;break}case 1:{e.y=1.5,e.x=2.5,e.yAngle=p;break}case 2:{e.y=2.5,e.x=2.5,e.yAngle=p+.01;break}case 3:{e.y=.5,e.x=3.5;break}case 4:{e.y=1.5,e.x=3.5;break}default:throw new Error("wtf")}return e});window.spheres=k;new G(t=>{k[0].zAngle=t/700,k[3].yAngle=t/831,k[4].zAngle=t/607,k[4].yAngle=t/501});{const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",M.squashedCircle(1,1,"real")),t.style.transform="translate(1.5px, 0.5px)",t.style.fill="orange",t.style.strokeWidth="0.1px",t.style.stroke="blue",t.style.strokeLinecap="round",z.appendChild(t)}{const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",M.squashedCircle(-.6667,1,"real")),t.style.transform="translate(2.5px, 0.5px)",t.style.fill="lime",t.style.strokeLinecap="round",z.appendChild(t)}
